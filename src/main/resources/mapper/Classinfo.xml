<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sundata.edu.dao.ClassinfoDao">
    
    <resultMap type="com.sundata.edu.domain.Classinfo" id="BaseResultMap">
        <result property="id" column="id" />
        <result property="classId" column="class_id" />
        <result property="classCode" column="class_code" />
        <result property="className" column="class_name" />
        <result property="classNickname" column="class_nickname" />
        <result property="classLevel" column="class_level" />
        <result property="gradeId" column="grade_id" />
        <result property="gradeCode" column="grade_code" />
        <result property="gradeName" column="grade_name" />
        <result property="schoolId" column="school_id" />
        <result property="status" column="status" />
    </resultMap>


    <!-- 根据年级查询班级 -->
    <select id="selectClassInfoByGradeId" resultType="java.util.Map" parameterType="java.util.Map">
        SELECT t1.class_id as id, t1.class_name as name, t1.grade_id as pid,t1.class_level,t2.org_name FROM classinfo t1
        left join orginfo t2 on t2.org_id = t1.school_id
        where 1 = 1
        <if test="gradeId != null and gradeId != ''">
          and t1.grade_id=#{gradeId}
        </if>
        <if test="classIdList != null and classIdList.size() > 0 ">
            AND class_id IN
            <foreach collection="classIdList" item="id" index="index" open="(" close=")" separator=",">
                #{id}
            </foreach>
        </if>
    </select>
</mapper>